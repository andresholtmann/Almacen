<style>
    .lukaso{
        margin: 0px;
        color: #000;
        text-decoration: none;
    }
    .lukaso:visited{
        margin: 0px;
        color: #000;
        text-decoration: none;
    }    
    .fifo{
        margin: 60px 0px 0px 0px;
    }
    .tulu{
        width: 100%;
        text-align: center;
    }
    .tulu2{
        margin:0px;
        width: 100%;
        text-align: center;
        font-size: 10px;
        clear: left;
    }    
    .nolo{
        width: 1400px;
        margin: auto;

    }
    .nolo2{
        width: 1400px;
        margin: auto;
      
    }
    
    .tulu img{
        height: 60px;
        margin: 0px auto 16px auto;
    }
    .a{
        float: left;
        width: 40%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px 4px 114px;
        font-weight: bold;
        color: black;
        font-size: 14px;
        text-align: left;
       
    }    
    .b{
        float: left;
        width: 40%;
        border: 0px solid #000;
        padding: 4px 8px 4px 154px;
        font-weight: bold;        
        color: black;     
        font-size: 14px;  
        text-align: left;
     
    }    
    .c{
        float: left;
        width: 34%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;  
        background-color: dimgray;        
        color: white;  
        font-size: 14px; 
         
    }    
    .d{
        float: left;
        width: 22%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;   
        font-size: 14px; 
        text-align: center;
         
    }    
    .e{
        float: left;
        width: 22%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;    
        font-size: 14px; 
        text-align: center;

    } 
    .f{
        float: left;
        width: 22%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;
       
    }    
    .g{
        float: left;
        width: 8%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center; 
     
    }    
    .h{
        float: left;
        width: 15%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;
         
    }    
    .i{
        float: left;
        width: 11%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;
         
    }    
    .j{
        float: left;
        width: 7%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;

    } 
    .k{
        float: left;
        width: 7%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;

    } 
        .l{
        float: left;
        width: 8%;
        border: 1px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-weight: bold;        
        background-color: dimgray;
        color: white;  
        font-size: 14px;
        text-align: center;

    } 
    .m{
        float: left;
        width: 8%;
         border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black; 
        font-size: 10px;
        text-align: center; 
        line-height: 34px;
     
    }    
    .n{
        float: left;
        width: 17%;
           border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black; 
        font-size: 10px;
        text-align: center;
        line-height: 34px;         
    }    
    .o{
        float: left;
        width: 7%;
            border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;  
        font-size: 10px;
        text-align: center;
        line-height: 34px;         
    }    
    .p{
        float: left;
        width: 7%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
    .q{
        float: left;
        width: 7%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
        .r{
        float: left;
        width: 8%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
        .s{
        float: left;
        width: 7%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
        .t{
        float: left;
        width: 9%;
          border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
        .u{
        float: left;
        width: 7%;
         border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
            .v{
        float: left;
        width: 7%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
            .w{
        float: left;
        width: 9%;
          border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    } 
            .x{
        float: left;
        width: 7%;
        border: 0px solid #000;
        margin:0px;
        padding: 4px 8px;
        color: black;
        font-size: 10px;
        text-align: center;
        line-height: 34px;
    }     
    .baco{
        background-color: beige;
    }
    
    @page  {
        size: landscape;
         /* auto es el valor inicial */
      margin: 0.5cm 1cm 1cm 1cm;
        

    }    
    @media all {        
       div.saltopagina{
          display: none;
       }
    }
    @media print{
body {
  padding-top: 0px;
} 
    .nolosito{
        width: 1400px;
        margin:20px auto 0px auto;
    }  
    .nolositos{
        width: 1400px;
        margin:106px auto 0px auto;
    }          
    .monoxio{
        width: 1400px;
        margin:92px auto 0px auto;
    }          
        .btn{
            display:  none;
        }        
      * {
          visibility: hidden;
      }
      #yesprint{
          visibility: visible;
          margin: 0px;
          top: 0px;
          left: 0px;
      }   
       div.saltopagina{ 
          display:block; 
          page-break-before:always;
       }
    }   
    .lefano{
        clear: left;
        }
    .momo{
        margin: 38px;
        width: 80%;
        text-align:right;
    }
    .puta{
        position: absolute;
        z-index: 101;
        
        
    }
    .puta img{
        width: 20px;
    }
    .chichirica{
        position: fixed;
        left: 79.1%;
    }
    .lino { color: #000; text-decoration: none; }
.lino:visited { color: #000; text-decoration: none; }    
    .tlineas{
        position: absolute;
        left: 6px;
    }
    
</style>
<?php  $putas = htmlspecialchars($_GET['pro']); ?>
<br><br><br>
<button onclick="myFunction()" type="button" class="btn btn-primary btn-block">Imprimir Kardex</button>
 <div class="chichirica"> 
<form class="form-inline" method="post" action="?alm=_14_3&pro=<?php echo $putas;?>" >
  <div class="form-group mb-2">
    <input type="text" class="form-control-plaintext" id="staticEmail2" name="lin" placeholder="imp lin.">
  </div>
  <button type="submit" class="btn btn-primary">print</button>
</form> 
</div>
<br><br>
<div class="row text-center">
    <?php   
     $query = "SELECT id_pro,cod_pro,st_pro,cat_pro FROM prod_".$tutu."  where st_pro like '0' and id_pro like '".htmlspecialchars($_GET['pro'])."' ";
        $result = mysqli_query($mysqli, $query) or trigger_error("Query Failed! SQL: $query - Error: ". mysqli_error($mysqli), E_USER_ERROR);
        if($result) {
            while($row = mysqli_fetch_assoc($result)) {
            if ($tota == 0) {
        
                                $codo = $row['cod_pro'] ;
                                $cat = $row['cat_pro'] ;  
                                $ido = $row['id_pro'] ;   
                            }
            }
        }
        mysqli_free_result($result);
    
    ?>     
    



</div>
<?php   
 $query = "SELECT id_pro,cod_pro,cat_pro,pres_pro,pro_pro,st_pro,id_pres,pres_pres FROM prod_".$tutu." inner join pres_".$tutu." on pres_pro = id_pres where st_pro like '0' and id_pro like '".htmlspecialchars($_GET['pro'])."'";
    $result = mysqli_query($mysqli, $query) or trigger_error("Query Failed! SQL: $query - Error: ". mysqli_error($mysqli), E_USER_ERROR);
    if($result) {
        while($row = mysqli_fetch_assoc($result)) {
        if ($tota == 0) {
                         $pro= $row['pro_pro'];
                         $cod= $row['cod_pro'];
                         $ale= $row['id_pro'];
                         $pres= $row['pres_pres'];            
                        }
        }
    }
    mysqli_free_result($result);

if ($resulta = $mysqli->query("SELECT id_mov,fac_mov,kar_mov,tip_mov,prod_mov,cant_mov,preu_mov,DATE_FORMAT(fech_mov,'%d/%m/%Y') AS niceDate FROM mov_".$tutu." where prod_mov like '".$ale."' and st_mov like '1' order by fech_mov,id_mov ASC")) {
    /* determinar el número de filas del resultado */
    $row_cnta = $resulta->num_rows;
  //  echo $row_cnta;
 
  //    echo $mamirica;                                             
    /* cerrar el resultset */
    $resulta->close();
}

?>
<div class="nolosito">&nbsp;</div>

<div id="yesprint" class="nolo"> 
    <div id="yesprint" class="b"><?php echo $pro;?></div>
    <div id="yesprint" class="a"><?php echo $cod;?></div>
</div>   
    <div  class="nolo lefano">
        <div  class="c"> &nbsp;</div>
        <div class="d">Entradas</div>
        <div  class="e">Salidas</div>
        <div  class="f">Saldo</div>
    </div>
    <div  class="nolo lefano">
        <div  class="g">Fecha</div>
        <div class="h">Concepto</div>
        <div  class="i">U. Medida</div>
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>  
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>  
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>                        
    </div>  
<div class="monoxio">&nbsp;</div>       
<?php  
 $query = "SELECT id_mov,fac_mov,kar_mov,tip_mov,prod_mov,cant_mov,preu_mov,st_mov,DATE_FORMAT(fech_mov,'%d/%m/%Y') AS niceDate FROM mov_".$tutu." where prod_mov like '".$ale."' and st_mov like '1' order by fech_mov,id_mov ASC";
    $result = mysqli_query($mysqli, $query) or trigger_error("Query Failed! SQL: $query - Error: ". mysqli_error($mysqli), E_USER_ERROR);
    $tota = 0 ;
    $toto = 0 ;
    $pagi = 1 ;
    $pogo = 0 ;
    $toto2 = 0 ;
$soso = 1 ;
$t_lineas = $row_cnta;
    if($result) {
        while($row = mysqli_fetch_assoc($result)) {
        if ($row['tip_mov'] == 'INV') {
            $canto=$row['cant_mov'];
            $preco=$row['preu_mov'];            
?> 
      <div  class="nolo lefano">
        <div id="yesprint"  class="m"><div class="tlineas label label-default"><?php echo $t_lineas;?></div>&nbsp;&nbsp;&nbsp;<?php echo $row['niceDate'];?><a class="puta" href="?alm=_14_1&pro=<?php echo $ale;?>&lin=<?php echo $soso;?>" target="_blank"><img src="_print.png"></a></div>
        <div id="yesprint" class="n">Inventario</div>
        <div id="yesprint"  class="o">&nbsp;&nbsp;<?php echo $pres;?></div>
        <div id="yesprint"  class="p">&nbsp;</div>
        <div id="yesprint" class="q">&nbsp;</div>        
        <div id="yesprint"  class="r">&nbsp;</div>  
        <div id="yesprint"  class="s">&nbsp;</div>
        <div id="yesprint" class="t">&nbsp;</div>
        <div id="yesprint"  class="u">&nbsp;</div>  
        <div id="yesprint"  class="v"><?php echo $canto;?></div>
        <div id="yesprint" class="w">Q. <?php echo number_format($preco, 2);?></div>
        <div id="yesprint"  class="x">&nbsp;&nbsp;&nbsp;&nbsp;<?php $toto = $canto * $preco;?> Q. <?php echo number_format($toto, 2);?></div>                        
    </div> 
<?php
              
        } else { }
?>        
<?php               
        if ($row['tip_mov'] == 'ING') {
        $queryada = "SELECT id_fac,num_fac,fecho_fac,ser_fac,unoh_fac,tip_fac FROM fac_".$tutu." where id_fac like '".$row['fac_mov']."'";
        $resultada = mysqli_query($mysqli, $queryada) or trigger_error("Query Failed! SQL: $queryada - Error: ". mysqli_error($mysqli), E_USER_ERROR);
        if($resultada) {
            while($rowada = mysqli_fetch_assoc($resultada)) {
                $ab=$rowada['fecho_fac'];
                $cd=$rowada['num_fac'];
                $ef=$rowada['ser_fac'];                
                $unoh=$rowada['unoh_fac']; 
                $tipo=$rowada['tip_fac']; 

                      
            }
        }
        mysqli_free_result($resultada);
    ?>      
      <div  class="nolo lefano">
          <div id="yesprint"  class="m"><div class="tlineas label label-default"><?php echo $t_lineas;?></div>&nbsp;&nbsp;&nbsp;<?php echo $row['niceDate'];?><a class="puta" href="?alm=_14_1&pro=<?php echo $ale;?>&lin=<?php echo $soso;?>" target="_blank"><img src="_print.png"></a></div>
          <?php 
                if ($tipo  == 'FAC' ) {
          ?>                    
            <div id="yesprint" class="n">Fac - <?php echo $ef;?>-<?php echo $cd;?> / 1H -<?php echo $unoh;?></div>                
          <?php                         
                } else {
          ?>                    
            <div id="yesprint" class="n">Acta admin.<?php echo $cd;?></div>                
          <?php                         
                }
          ?>
        <div id="yesprint"  class="o">&nbsp;&nbsp;<?php echo $pres;?></div>
        <div id="yesprint"  class="p"><?php echo $row['cant_mov'];?></div>
        <div id="yesprint" class="q">Q. <?php echo number_format($row['preu_mov'], 3);?></div>
        <div id="yesprint"  class="r"><?php $totato= $row['cant_mov'] * $row['preu_mov'];?> Q. <?php echo number_format($totato, 2);?></div>  
        <div id="yesprint"  class="s">&nbsp;</div>
        <div id="yesprint" class="t">&nbsp;</div>
        <div id="yesprint"  class="u">&nbsp;</div>  
        <div id="yesprint"  class="v"><?php $canto = $canto + $row['cant_mov']; echo $canto; $toto = $toto + $totato; $sipirili = $toto/$canto ?></div>
        <div id="yesprint" class="w">Q. <?php  echo number_format($sipirili, 2);?></div>
        <div id="yesprint"  class="x">&nbsp;&nbsp;&nbsp;&nbsp;Q. <?php  echo number_format($toto, 2);?></div>                        
    </div> 
<?php
                            $preco=$sipirili;  
              
        } 
?>        
<?php               
        if ($row['tip_mov'] == 'EGR') {
        
        $queryada = "SELECT id_kar,num_kar,fecho_kar,tip_kar FROM kardex_".$tutu." where id_kar like '".$row['kar_mov']."'";
        $resultada = mysqli_query($mysqli, $queryada) or trigger_error("Query Failed! SQL: $queryada - Error: ". mysqli_error($mysqli), E_USER_ERROR);
        if($resultada) {
            while($rowada = mysqli_fetch_assoc($resultada)) {
                $ab=$rowada['fecho_kar'];
                $cd=$rowada['num_kar'];
                $isa=$rowada['tip_kar'];
                      
            }
        }
        mysqli_free_result($resultada);
    ?>      
      <div  class="nolo lefano baco">
          <div id="yesprint"  class="m baco"><div class="tlineas label label-default"><?php echo $t_lineas;?></div>&nbsp;&nbsp;&nbsp;<?php echo $row['niceDate'];?><a class="puta" href="?alm=_14_1&pro=<?php echo $ale;?>&lin=<?php echo $soso;?>" target="_blank"><img src="_print.png"></a></div>
          <?php 
                if ($isa  == 'KAR' ) {
          ?>                    
            <div id="yesprint" class="n baco">Sal. - <?php echo $cd;?></div>
          <?php                         
                } else {
          ?>                    
           <div id="yesprint" class="n baco">Act. Admin.<?php echo $cd;?></div>
          <?php                         
                }
          ?>          
        <div id="yesprint"  class="o baco">&nbsp;&nbsp;<?php echo $pres;?></div>
        <div id="yesprint"  class="p baco">&nbsp;</div>
        <div id="yesprint" class="q baco">&nbsp;</div>
        <div id="yesprint"  class="r baco">&nbsp;</div>  
        <div id="yesprint"  class="s baco"><?php echo $row['cant_mov'];?></div>
        <div id="yesprint" class="t baco">Q. <?php echo number_format($preco, 2);?></div>
        <div id="yesprint"  class="u baco"><?php $totato2= $row['cant_mov'] * $preco;?> Q. <?php echo number_format($totato2, 2);?></div>        
        <div id="yesprint"  class="v baco"><?php $canto = $canto - $row['cant_mov']; echo $canto;?></div>
        <div id="yesprint" class="w baco">Q. <?php
            if ($canto == '0') { echo '0.00' ;} else { 
            echo number_format($preco, 2);
            }
            ?></div>
        <div id="yesprint"  class="x baco">&nbsp;&nbsp;&nbsp;&nbsp;Q. <?php $toto = $canto * $preco;?> <?php echo number_format($toto, 2);?></div>                        
    </div> 
<?php
               
        } 
?>  
    
<?php          
        if ($tota == 16) {
?> 
    <div  class="nolo lefano">
        <div id="yesprint"  class="m">&nbsp;</div>
        <div id="yesprint" class="n">VAN</div>
        <div id="yesprint"  class="o">&nbsp;</div>
        <div id="yesprint"  class="p">&nbsp;</div>
        <div id="yesprint" class="q">&nbsp;</div>
        <div id="yesprint"  class="r">&nbsp;</div>  
        <div id="yesprint"  class="s">&nbsp;</div>
        <div id="yesprint" class="t">&nbsp;</div>
        <div id="yesprint"  class="u">&nbsp;</div>  
        <div id="yesprint"  class="v"><?php echo $canto;?></div>
        <div id="yesprint" class="w">Q. <?php echo number_format($preco, 2);?></div>
        <div id="yesprint"  class="x">&nbsp;&nbsp;&nbsp;&nbsp;Q. <?php $toto3 = $canto * $preco;?> <?php echo number_format($toto3, 2);?></div>                        
    </div>   
    <div id="yesprint"  class="saltopagina">&nbsp;</div>  
<div class="nolositos">&nbsp;</div>
<div id="yesprint" class="nolo"> 
    <div id="yesprint" class="b">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $pro;?></div>
    <div id="yesprint" class="a">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $cod;?></div>
</div>   
    <div  class="nolo lefano">
        <div  class="c"> &nbsp;</div>
        <div class="d">Entradas</div>
        <div  class="e">Salidas</div>
        <div  class="f">Saldo</div>
    </div>
    <div  class="nolo lefano">
        <div  class="g">Fecha</div>
        <div class="h">Concepto</div>
        <div  class="i">U. Medida</div>
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>  
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>  
        <div  class="j">Cant.</div>
        <div class="k">V. Uni.</div>
        <div  class="l">V. Total</div>                        
    </div>    
<div class="monoxio">&nbsp;</div>              
    <div  class="nolo lefano">
        <div id="yesprint"  class="m">&nbsp;</div>
        <div id="yesprint" class="n">VIENEN</div>
        <div id="yesprint"  class="o">&nbsp;</div>
        <div id="yesprint"  class="p">&nbsp;</div>
        <div id="yesprint" class="q">&nbsp;</div>
        <div id="yesprint"  class="r">&nbsp;</div>  
        <div id="yesprint"  class="s">&nbsp;</div>
        <div id="yesprint" class="t">&nbsp;</div>
        <div id="yesprint"  class="u">&nbsp;</div>  
        <div id="yesprint"  class="v"><?php echo $canto;?></div>
        <div id="yesprint" class="w">Q. <?php echo number_format($preco, 2);?></div>
        <div id="yesprint"  class="x">&nbsp;&nbsp;&nbsp;&nbsp;Q. <?php $toto4 = $canto * $preco;?> <?php echo number_format($toto4, 2);?></div>                         
    </div>    
<?php
        } 
           
?>        
<?php
    $tota ++ ; 
    $pogo ++ ;             
if ($tota == 17) {
    $tota = 1;
    $pagi = $pagi + 1 ;
    } else {}
$soso ++ ;  
$t_lineas --  ;            
        }
    }
    mysqli_free_result($result);


?>
<script>
function myFunction() {
    window.print();
}
</script>
